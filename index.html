<!doctype html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-54MF63QMDH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'G-54MF63QMDH');
    </script>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1" />
    <title>Ancient Realms of Mystery</title>
    <meta
      name="description"
      content="Ancient Realms of Mystery is a browser roguelike with overworld exploration, towns, dungeons, loot, and turn-based combat." />
    <meta
      name="keywords"
      content="roguelike, dungeon crawler, fantasy, pixel art, browser game, turn-based" />
    <meta
      name="robots"
      content="index,follow" />
    <meta
      name="theme-color"
      content="#1b140e" />
    <link
      rel="canonical"
      href="https://ancientrealmsofmystery.com/" />
    <meta
      property="og:title"
      content="Ancient Realms of Mystery" />
    <meta
      property="og:description"
      content="A browser roguelike with overworld exploration, towns, dungeons, loot, and turn-based combat." />
    <meta
      property="og:url"
      content="https://ancientrealmsofmystery.com/" />
    <meta
      property="og:type"
      content="website" />
    <meta
      property="og:site_name"
      content="Ancient Realms of Mystery" />
    <meta
      property="og:image"
      content="https://ancientrealmsofmystery.com/og/og-image.png" />
    <meta
      name="twitter:card"
      content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Ancient Realms of Mystery" />
    <meta
      name="twitter:description"
      content="A browser roguelike with overworld exploration, towns, dungeons, loot, and turn-based combat." />
    <meta
      name="twitter:image"
      content="https://ancientrealmsofmystery.com/og/og-image.png" />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "VideoGame",
        "name": "Ancient Realms of Mystery",
        "description": "A browser roguelike with overworld exploration, towns, dungeons, loot, and turn-based combat.",
        "url": "https://ancientrealmsofmystery.com/",
        "image": "https://ancientrealmsofmystery.com/og/og-image.png",
        "genre": "Roguelike",
        "applicationCategory": "Game",
        "operatingSystem": "Any"
      }
    </script>
    <style>
      :root {
        color-scheme: dark;
        --bg-ink: #1b140e;
        --bg-shadow: #0d0a08;
        --panel: #241b13;
        --panel-edge: #3a2c1e;
        --panel-highlight: #2d2117;
        --text: #f3e8d3;
        --muted: #c7b79b;
        --accent: #d7b46a;
        --accent-deep: #9a6b2f;
        --blood: #6b2c24;
        --emerald: #2c6144;
      }
      body {
        background:
          radial-gradient(circle at top, rgba(76, 55, 34, 0.45), transparent 55%),
          repeating-linear-gradient(135deg, rgba(255, 255, 255, 0.02) 0 6px, rgba(0, 0, 0, 0.02) 6px 12px),
          linear-gradient(180deg, var(--bg-ink), var(--bg-shadow));
        color: var(--text);
        font-family: Georgia, 'Times New Roman', serif;
        margin: 0;
        padding: 12px;
      }
      .wrap {
        display: grid;
        grid-template-columns: minmax(0, 1fr) 420px;
        gap: 14px;
        align-items: start;
      }
      #ascii {
        white-space: pre;
        line-height: 1.05em;
        font-size: 18px;
        border: 1px solid var(--panel-edge);
        border-radius: 12px;
        padding: 12px;
        background: linear-gradient(180deg, #1a130d, #140f0b);
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.02);
        min-height: 560px;
      }
      #hudBar {
        border: 1px solid var(--panel-edge);
        border-radius: 12px;
        padding: 10px 12px;
        background: linear-gradient(180deg, #1b140e, #140f0b);
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.02);
      }
      .hudBarRow {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 12px;
        align-items: center;
      }
      .hudBarItem {
        display: grid;
        gap: 4px;
      }
      .hudBarLabel {
        font-size: 14px;
        color: var(--muted);
      }
      .hudBarTrack {
        position: relative;
        height: 14px;
        background: #1c140f;
        border: 1px solid var(--panel-edge);
        border-radius: 999px;
        overflow: hidden;
      }
      .hudBarFill {
        height: 100%;
        width: 0;
      }
      .hudBarFill.hp {
        background: linear-gradient(90deg, #6b2c24, #b04a3d);
      }
      .hudBarFill.xp {
        background: linear-gradient(90deg, #6f5a2c, #d7b46a);
      }
      .hudBarText {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 13px;
        color: #f3e8d3;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
      }
      #canvasWrap {
        border: 1px solid var(--panel-edge);
        border-radius: 12px;
        background: linear-gradient(180deg, #1a130d, #140f0b);
        padding: 12px;
        width: fit-content;
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.02);
      }
      #gameCanvas {
        image-rendering: pixelated;
        width: 100%;
        height: auto;
        border-radius: 8px;
      }
      #side {
        border: 1px solid var(--panel-edge);
        border-radius: 12px;
        padding: 12px;
        background: linear-gradient(180deg, var(--panel), var(--panel-highlight));
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.03);
      }
      #log {
        margin-top: 10px;
        border-top: 1px solid var(--panel-edge);
        padding-top: 10px;
        max-height: 220px;
        overflow: auto;
      }
      #panel {
        margin-top: 10px;
        border-top: 1px solid var(--panel-edge);
        padding-top: 10px;
        max-height: 320px;
        overflow: auto;
      }
      #minimapWrap {
        margin-top: 10px;
        border: 1px solid var(--panel-edge);
        border-radius: 12px;
        padding: 8px;
        background: linear-gradient(180deg, #1a130d, #140f0b);
      }
      #minimapTitle {
        font-size: 13px;
        color: var(--muted);
        margin-bottom: 6px;
      }
      #minimap {
        display: block;
        width: 100%;
        height: auto;
        border-radius: 8px;
        image-rendering: pixelated;
      }
      .hint {
        color: var(--muted);
        font-size: 14px;
      }
      .row {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        align-items: center;
      }
      .menu {
        position: relative;
      }
      .menu summary {
        list-style: none;
      }
      .menu summary::-webkit-details-marker {
        display: none;
      }
      .menu summary::after {
        content: '▾';
        margin-left: 6px;
        font-size: 12px;
        color: var(--muted);
      }
      .menuList {
        position: absolute;
        top: 110%;
        left: 0;
        min-width: 180px;
        padding: 8px;
        display: grid;
        gap: 6px;
        background: linear-gradient(180deg, #221a12, #1a140e);
        border: 1px solid var(--panel-edge);
        border-radius: 12px;
        box-shadow: 0 12px 28px rgba(0, 0, 0, 0.4);
        z-index: 10;
      }
      .menuList button {
        width: 100%;
        text-align: left;
      }
      .menuLabel {
        font-size: 13px;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        color: #e6d3ad;
        margin-top: 2px;
      }
      button {
        background: linear-gradient(180deg, #2e2217, #20160f);
        color: var(--text);
        border: 1px solid var(--panel-edge);
        border-radius: 10px;
        padding: 8px 12px;
        cursor: pointer;
        box-shadow: 0 2px 0 rgba(0, 0, 0, 0.25);
        font-family: Georgia, 'Times New Roman', serif;
        letter-spacing: 0.02em;
      }
      summary.btnTiny,
      select.btnTiny {
        background: linear-gradient(180deg, #2e2217, #20160f);
        color: var(--text);
        border: 1px solid var(--panel-edge);
        border-radius: 10px;
        padding: 6px 10px;
        cursor: pointer;
        box-shadow: 0 2px 0 rgba(0, 0, 0, 0.25);
        font-family: Georgia, 'Times New Roman', serif;
        letter-spacing: 0.02em;
      }
      input.textInput {
        background: linear-gradient(180deg, #2e2217, #20160f);
        color: var(--text);
        border: 1px solid var(--panel-edge);
        border-radius: 10px;
        padding: 6px 10px;
        font-family: Georgia, 'Times New Roman', serif;
        letter-spacing: 0.02em;
        flex: 1;
        min-width: 180px;
      }
      input.textInput.invalid {
        border-color: #7a3c2a;
        box-shadow: 0 0 0 2px rgba(122, 60, 42, 0.2);
      }
      .inputErrorText {
        color: #f2b1a2;
        font-size: 14px;
      }
      select.btnTiny {
        appearance: none;
      }
      button:hover {
        filter: brightness(1.1);
        border-color: #5a4228;
      }
      button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        filter: none;
      }
      .pill {
        padding: 4px 10px;
        border-radius: 999px;
        border: 1px solid var(--panel-edge);
        background: #1f1711;
        font-size: 14px;
        font-family: Georgia, 'Times New Roman', serif;
      }
      .kv {
        display: flex;
        justify-content: space-between;
        gap: 10px;
      }
      .small {
        font-size: 14px;
        color: var(--muted);
      }
      .muted {
        color: #b7a78c;
      }
      b {
        color: var(--text);
      }
      .panelTitle {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        font-family: Georgia, 'Times New Roman', serif;
        letter-spacing: 0.04em;
      }
      .panelMeta {
        color: #dbcaa9;
      }
      .panelLine {
        color: #d6c5a2;
      }
      .panelSectionTitle {
        font-family: Georgia, 'Times New Roman', serif;
        text-transform: uppercase;
        font-size: 13px;
        letter-spacing: 0.12em;
        color: #e6d3ad;
      }
      .grid {
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 6px 8px;
        align-items: center;
      }
      .btnTiny {
        padding: 4px 8px;
        border-radius: 8px;
        font-size: 14px;
      }
      .sep {
        border-top: 1px solid var(--panel-edge);
        margin: 8px 0;
      }
      .tag {
        font-size: 13px;
        padding: 2px 6px;
        border: 1px solid var(--panel-edge);
        border-radius: 999px;
        background: #1c140e;
        color: #cbb894;
      }
      .tagChosen {
        border-color: #6e4d2a;
        background: rgba(110, 77, 42, 0.25);
        color: #f2d39c;
      }
      .rarityBadge {
        display: inline-block;
        margin-right: 6px;
        padding: 1px 6px;
        border-radius: 999px;
        font-size: 13px;
        font-weight: 600;
        letter-spacing: 0.04em;
        text-transform: uppercase;
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(22, 16, 12, 0.7);
      }
      .rarity-common {
        color: #cbbda2;
      }
      .rarity-uncommon {
        color: #6fd39b;
        border-color: #2f5d46;
      }
      .rarity-rare {
        color: #7fa8ff;
        border-color: #3a4e8b;
      }
      .rarity-epic {
        color: #f09ad3;
        border-color: #8b3f64;
      }
      .rarity-legendary {
        color: #f6c36b;
        border-color: #8a5a22;
      }
      .shopMeta {
        margin-top: 6px;
      }
      .shopDeal {
        color: #f2c67a;
        margin-top: 4px;
      }
      .priceTag {
        display: inline-block;
        margin-left: 6px;
        padding: 1px 6px;
        border-radius: 999px;
        font-size: 11px;
        border: 1px solid var(--panel-edge);
        color: #f0dfc1;
      }
      .priceOk {
        background: rgba(35, 79, 58, 0.35);
        border-color: #2f5d46;
        color: #c6f3d9;
      }
      .priceBad {
        background: rgba(91, 48, 34, 0.4);
        border-color: #6b3b2a;
        color: #f2b1a2;
      }
      .dealTag {
        display: inline-block;
        margin-left: 6px;
        padding: 1px 6px;
        border-radius: 999px;
        font-size: 10px;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        border: 1px solid #6b4a1e;
        color: #f3d39a;
        background: rgba(64, 44, 20, 0.6);
      }
      #stats {
        margin-top: 10px;
      }
      .marginTop10 {
        margin-top: 10px;
      }
      .marginTop12 {
        margin-top: 12px;
      }
      .marginBottom10 {
        margin-bottom: 10px;
      }
      .displayNone {
        display: none;
      }
      .btnHidden {
        display: none;
      }
      .classSelectOverlay {
        position: fixed;
        inset: 0;
        background: rgba(15, 10, 7, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 999;
      }
      .classSelectOverlay.hidden {
        display: none;
      }
      .saveModalOverlay {
        position: fixed;
        inset: 0;
        background: rgba(15, 10, 7, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
      }
      .saveModalOverlay.hidden {
        display: none;
      }
      .saveModalCard {
        background: linear-gradient(180deg, var(--panel), var(--panel-highlight));
        border: 1px solid var(--panel-edge);
        border-radius: 12px;
        padding: 20px;
        width: min(720px, 92%);
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.45);
      }
      .saveModalCard h3 {
        margin: 0 0 6px;
      }
      .saveModalCard p {
        margin: 0 0 12px;
        color: var(--muted);
        font-size: 13px;
      }
      .saveModalCard textarea {
        width: 100%;
        min-height: 200px;
        resize: vertical;
        background: #15100b;
        color: var(--text);
        border: 1px solid var(--panel-edge);
        border-radius: 10px;
        padding: 10px;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', monospace;
        font-size: 12px;
      }
      .saveModalActions {
        display: flex;
        gap: 8px;
        justify-content: flex-end;
        margin-top: 12px;
        flex-wrap: wrap;
      }
      .classSelectCard {
        background: linear-gradient(180deg, var(--panel), var(--panel-highlight));
        border: 1px solid var(--panel-edge);
        border-radius: 12px;
        padding: 24px;
        width: min(540px, 90%);
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.45);
      }
      .classSelectCard h2 {
        margin: 0 0 8px;
      }
      .classSelectCard p {
        margin: 0 0 16px;
        color: var(--muted);
      }
      .classGrid {
        display: grid;
        gap: 12px;
      }
      .classChoice {
        text-align: left;
        background: #1f1610;
        border: 1px solid var(--panel-edge);
        border-radius: 10px;
        padding: 14px;
        color: var(--text);
        cursor: pointer;
        transition:
          border-color 0.2s,
          transform 0.2s;
      }
      .classChoice strong {
        display: block;
        font-size: 16px;
        margin-bottom: 4px;
        color: var(--text);
      }
      .classChoice span {
        display: block;
        font-size: 13px;
        color: var(--muted);
      }
      .classChoice small {
        display: block;
        margin-top: 6px;
        font-size: 12px;
        color: #d6c5a2;
      }
      .classChoice:hover {
        border-color: #6e4d2a;
        transform: translateY(-1px);
      }
      a {
        color: #f1d7a1;
      }
      @media (max-width: 1500px) {
        .wrap {
          grid-template-columns: 1fr;
        }
        .hudBarRow {
          grid-template-columns: 1fr;
        }
        #ascii,
        #canvasWrap,
        #side {
          width: 100%;
        }
        #gameCanvas {
          max-width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div>
        <div
          id="hudBar"
          class="hudBar"></div>
        <div class="row marginBottom10">
          <span
            class="pill"
            id="modePill"></span>
          <span
            class="pill"
            id="renderPill"></span>
          <span
            class="hint"
            id="controlsHint"
            >Move WASD/Arrows • Shift+Move run • M map • Enter use • I inventory • B shop • Q quests • G pick up • R renderer • F FOV • P save • O
            load</span
          >
        </div>

        <div id="ascii"></div>

        <div
          id="canvasWrap"
          class="marginTop12 displayNone">
          <canvas
            id="gameCanvas"
            width="1024"
            height="576"></canvas>
        </div>
      </div>

      <div id="side">
        <div class="row">
          <details class="menu">
            <summary
              class="btnTiny"
              id="menuActionsLabel">
              Actions
            </summary>
            <div class="menuList">
              <div class="menuLabel">Game</div>
              <button id="btnNewSeed">New Seed</button>
              <button id="btnSave">Save</button>
              <button id="btnLoad">Load</button>
              <div class="menuLabel">Share</div>
              <button id="btnExportSave">Export Save</button>
              <button id="btnImportSave">Import Save</button>
            </div>
          </details>

          <details class="menu">
            <summary
              class="btnTiny"
              id="menuPanelsLabel">
              Panels
            </summary>
            <div class="menuList">
              <button id="btnInv">Inventory</button>
              <button id="btnShop">Shop</button>
              <button id="btnStory">Story</button>
              <button id="btnMap">Map</button>
            </div>
          </details>

          <details class="menu">
            <summary
              class="btnTiny"
              id="menuRenderLabel">
              Render
            </summary>
            <div class="menuList">
              <button id="btnCanvas">Canvas</button>
            </div>
          </details>
        </div>
        <div class="hint marginTop10">
          <span id="supportLead">Enjoying the adventure?</span>
          <a
            id="supportLink"
            href="https://buymeacoffee.com/figuremodel"
            target="_blank"
            rel="noopener noreferrer"
            >Buy me a coffee</a
          >
          <span id="supportTail">to keep it going.</span>
        </div>

        <div
          class="hint marginTop10"
          id="overworldHint">
          Overworld: <b>D</b> dungeons, <b>T</b> towns, <b>=</b> roads. Press <b>M</b> for map + auto-walk (Enter to set destination). Dungeons have
          levels (<b>&gt;</b>/<b>&lt;</b>). Monsters use A* pathing when they can see you.
        </div>

        <div id="minimapWrap">
          <div
            id="minimapTitle"
            class="small">
            Map
          </div>
          <canvas
            id="minimap"
            width="240"
            height="160"></canvas>
        </div>

        <div id="stats"></div>
        <div id="panel"></div>
        <div id="log"></div>
      </div>
    </div>

    <div
      id="classSelect"
      class="classSelectOverlay">
      <div class="classSelectCard">
        <h2 id="classSelectTitle">Select Your Adventurer</h2>
        <p id="classSelectSubtitle">Each hero fights differently. Pick the style that suits you.</p>
        <div class="row marginTop12">
          <label
            class="small"
            id="nameLabel"
            for="nameInput"
            >Name</label
          >
          <input
            id="nameInput"
            class="textInput"
            type="text"
            maxlength="24"
            autocomplete="off"
            spellcheck="false" />
          <button
            id="btnNameRandom"
            type="button"
            class="btnTiny">
            Random
          </button>
        </div>
        <div
          id="nameError"
          class="inputErrorText marginTop10"></div>
        <div class="row marginTop12">
          <label
            class="small"
            id="genderLabel"
            for="genderSelect"
            >Gender</label
          >
          <select
            id="genderSelect"
            class="btnTiny">
            <option value="female">Female</option>
            <option value="male">Male</option>
            <option value="nonbinary">Non-binary</option>
          </select>
        </div>
        <div class="sep"></div>
        <div class="classGrid">
          <button
            type="button"
            class="classChoice"
            data-class="warrior">
            <strong>Warrior</strong>
            <span>Heavy melee fighter with unmatched strength.</span>
            <small>Strength 6 • Agility 3 • Intellect 2</small>
          </button>
          <button
            type="button"
            class="classChoice"
            data-class="rogue">
            <strong>Rogue</strong>
            <span>Fast strikes, high agility, and lethal precision.</span>
            <small>Strength 3 • Agility 6 • Intellect 3</small>
          </button>
          <button
            type="button"
            class="classChoice"
            data-class="mage">
            <strong>Mage</strong>
            <span>Harness arcane power to burn through defenses.</span>
            <small>Strength 2 • Agility 3 • Intellect 7</small>
          </button>
        </div>
        <button
          id="btnLoadFromModal"
          type="button"
          class="btnTiny marginTop12">
          Load Saved Game
        </button>
      </div>
    </div>

    <div
      id="saveModal"
      class="saveModalOverlay hidden">
      <div class="saveModalCard">
        <h3 id="saveModalTitle">Share Save</h3>
        <p id="saveModalHint">Copy this save code to share, or paste a save code to load.</p>
        <textarea
          id="saveJsonText"
          spellcheck="false"
          placeholder="Paste save code here"></textarea>
        <div class="saveModalActions">
          <button
            id="btnSaveModalCopy"
            type="button">
            Copy
          </button>
          <button
            id="btnSaveModalLoad"
            type="button">
            Load Save
          </button>
          <button
            id="btnSaveModalClose"
            type="button">
            Close
          </button>
        </div>
      </div>
    </div>

    <script
      type="module"
      src="/src/main.ts"></script>
  </body>
</html>
